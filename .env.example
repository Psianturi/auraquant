# WEEX / Exchange keys (later)
WEEX_API_KEY=
WEEX_SECRET_KEY=
WEEX_PASSPHRASE=

# WEEX execution controls
# IMPORTANT: keep WEEX_EXECUTE_ORDER=0 for dry-runs.
WEEX_EXECUTE_ORDER=1
WEEX_BASE_URL=https://api-contract.weex.com
WEEX_LEVERAGE=10
WEEX_MARGIN_MODE=1

# SL/TP mode
# - WEEX_USE_PRESET_SLTP: send preset SL/TP at open (may be rejected by WEEX for some symbols)
# - WEEX_USE_SERVER_TPSL_AFTER_OPEN: place TP/SL plan orders after entry is opened
WEEX_USE_PRESET_SLTP=0
WEEX_USE_SERVER_TPSL_AFTER_OPEN=1

# Orchestrator controls
MAX_HOLD_SECONDS=900
# Optional: if max-hold is reached while position is losing, extend the hold window
MAX_HOLD_LOSS_EXTEND=1
# Loss-extension window length in seconds (default: 600 = 10 minutes)
MAX_HOLD_LOSS_EXTEND_SECONDS=600
# Maximum number of hold extensions allowed (default: 1)
MAX_HOLD_LOSS_EXTEND_MAX_COUNT=1
# Optional: if max-hold is reached while position is profitable, force-close
MAX_HOLD_PROFIT_FORCE_CLOSE=1
# Optional: close immediately on any positive unrealized PnL
# WARNING: can churn fees
# CLOSE_ON_ANY_PROFIT=0


# Runner mode
# Set --forever (or --duration 0) to run without a duration limit.

# Multi-instance
# If you want multiple concurrent positions (e.g., run one bot per symbol), run multiple processes and pass different
# instance names so pidfiles/log files don't collide:
#   python -u src/auraquant_orchestrator.py --instance sol --symbol SOL/USDT --forever
#   python -u src/auraquant_orchestrator.py --instance eth --symbol ETH/USDT --forever

# IMPORTANT for multi-instance:
# WeexOrderManager cancels pending orders on startup by default (to free locked margin). If you run multiple bots,
# each process can cancel the other process' pending orders. Use these knobs to scope/disable the cleanup.
WEEX_STARTUP_CLEANUP=1
# all|symbols|symbol  (recommended for multi-instance: symbol)
WEEX_STARTUP_CLEANUP_SCOPE=symbol
# Used when scope=symbol
WEEX_STARTUP_CLEANUP_SYMBOL=
# Or use this when scope=symbols
WEEX_STARTUP_CLEANUP_SYMBOLS=
# normal cancels regular orders; plan cancels trigger/plan orders
WEEX_STARTUP_CLEANUP_CANCEL_ORDER_TYPE=normal
# Reduce WEEX "Model chat" spam by throttling noisy stages (defaults to SCAN/QUALIFY).
# AI_LOG_THROTTLE_SECONDS=120
# AI_LOG_THROTTLE_STAGES=SCAN,QUALIFY

# Throttle Gemini calls (seconds). Even if news is cached, Gemini won't be called more often than this.
# GEMINI_MIN_INTERVAL_SECONDS=120
# MIN_CONFIDENCE is optional. If unset, runner defaults to 0.075.
# Works with CORR_CONF_FLOOR_MULT to prevent denials when correlation is strong
MIN_CONFIDENCE=0.075

ENABLE_OFFLINE_POLICY=0
OFFLINE_POLICY_PATH=models/offline_policy.json
OFFLINE_POLICY_MAX_MULTIPLIER=0.15

# Risk sizing
RISK_PER_TRADE_PCT=0.4
MAX_POSITION_NOTIONAL_PCT=4.0

# RiskEngine volatility guard: deny entry if ATR% is too small
# Reduced from 0.00014 to 0.00007 (0.007%) to allow trades on volatile intraday periods
RISK_MIN_ATR_FOR_TRADE_PCT=0.00007

RISK_MIN_ATR_BTC_PCT=0.000025  # BTC: much lower for high price coins
RISK_MIN_ATR_ETH_PCT=0.000035  

# ATR-based SL/TP (multipliers)
SL_ATR_MULT=3.75
TP_ATR_MULT=2.4

# Correlation confidence floor: prevents zero confidence when sentiment is neutral
# but correlation is strong (0.0-1.0, default 0.35 = 35% of correlation strength)
CORR_CONF_FLOOR_MULT=0.35



# News provider (optional)
CRYPTOPANIC_API_TOKEN=

# Optional LLM sentiment scoring
OPENAI_API_KEY=
# Google Gemini API for NLP sentiment analysis
GOOGLE_API_KEY=
GEMINI_API_KEY=
GEMINI_MODEL=gemini-2.5-flash
# Disable Gemini calls (use heuristic fallback) while rate-limited
DISABLE_GEMINI_API=0
# Throttle Gemini calls (seconds) to avoid rate limits
GEMINI_MIN_INTERVAL_SECONDS=120

# CoinGecko API Track (optional)
# Set COINGECKO_API_KEY if you are issued an Analyst plan key.
# If COINGECKO_API_KEY is set, the client will default to CoinGecko Pro base URL.
# You may still override it explicitly via COINGECKO_BASE_URL.
COINGECKO_API_KEY=
# COINGECKO_BASE_URL=https://pro-api.coingecko.com/api/v3
COINGECKO_CACHE_DIR=runtime_cache/coingecko
# ==============================================================================
# TRADING MODE: CONTRARIAN vs TREND-FOLLOWING
# ==============================================================================
# CONTRARIAN_MODE=1: Buy low (near 24h low), sell high (near 24h high)
#   - Price > 0.85 of range → cancel LONG or suggest SHORT
#   - Price < 0.15 of range → cancel SHORT or suggest LONG
# CONTRARIAN_MODE=0: Default trend-following behavior
CONTRARIAN_MODE=1

# Overbought/oversold thresholds (0.0 - 1.0 of 24h price range)
# 0.85 = price is 85% from low to high (near top)
# 0.15 = price is 15% from low to high (near bottom)
OVERBOUGHT_THRESHOLD=0.85
OVERSOLD_THRESHOLD=0.15

# Momentum override: Force bias on strong 1h moves (default OFF)
# When enabled, NEUTRAL bias can become LONG/SHORT based on 1h change
# Recommended: keep disabled (0) for contrarian mode, or increase threshold
USE_MOMENTUM_OVERRIDE=0
MOMENTUM_OVERRIDE_MIN_CHANGE=1.5  # Require 1.5% move (was 0.8%)